<!DOCTYPE html>
<html>
<head>
    <title>Debug localStorage Responses</title>
</head>
<body>
    <h1>Debug localStorage for Values.md</h1>
    <button onclick="checkLocalStorage()">Check localStorage</button>
    <button onclick="simulateResponse()">Simulate Response</button>
    <button onclick="clearStorage()">Clear Storage</button>
    
    <pre id="output"></pre>
    
    <script>
        function log(message) {
            document.getElementById('output').textContent += message + '\n';
        }
        
        function checkLocalStorage() {
            document.getElementById('output').textContent = '';
            log('=== LOCALSTORAGE CONTENTS ===');
            
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                const value = localStorage.getItem(key);
                log(`${key}: ${value ? value.substring(0, 200) + '...' : 'null'}`);
            }
            
            log('\n=== DILEMMA SESSION SPECIFIC ===');
            const session = localStorage.getItem('dilemma-session');
            if (session) {
                try {
                    const parsed = JSON.parse(session);
                    log(`Session ID: ${parsed.sessionId}`);
                    log(`Responses count: ${parsed.responses ? parsed.responses.length : 'undefined'}`);
                    log(`Full data: ${JSON.stringify(parsed, null, 2)}`);
                } catch (e) {
                    log(`Parse error: ${e.message}`);
                }
            } else {
                log('No dilemma-session found in localStorage');
            }
        }
        
        function simulateResponse() {
            const sessionData = {
                sessionId: 'test-session-' + Date.now(),
                responses: [
                    {
                        dilemmaId: 'test-dilemma-1',
                        chosenOption: 'a',
                        reasoning: 'This is a test response',
                        responseTime: 5000,
                        perceivedDifficulty: 7
                    }
                ]
            };
            
            localStorage.setItem('dilemma-session', JSON.stringify(sessionData));
            log('Simulated response data saved to localStorage');
            checkLocalStorage();
        }
        
        function clearStorage() {
            localStorage.clear();
            log('localStorage cleared');
        }
        
        // Auto-check on load
        checkLocalStorage();
    </script>
</body>
</html>