
> values.md@0.1.0 dev
> next dev --turbopack

   ▲ Next.js 15.3.3 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://45.90.121.59:3000
   - Environments: .env.local, .env

 ✓ Starting...
 ✓ Ready in 1859ms
 ○ Compiling /api/health ...
 ✓ Compiled /api/health in 1858ms
🔍 Health check: Testing database connectivity...
🔍 Health check: Testing dilemmas table...
🔍 Health check: Testing random dilemma API...
 ○ Compiling /api/dilemmas/random ...
 ✓ Compiled /api/dilemmas/random in 774ms
 GET /api/dilemmas/random 307 in 950ms
🔍 Health check: Testing responses API...
 GET /api/dilemmas/random 307 in 122ms
 ○ Compiling /api/responses ...
 ✓ Compiled /api/responses in 656ms
📥 Received 1 responses for session health-check-1751538411590
💾 Inserting responses into database...
✅ Successfully inserted 1 responses
 POST /api/responses 200 in 952ms
🔍 Health check: Testing user responses table...
🔍 Health check: Testing generate values API...
 ○ Compiling /api/generate-values ...
 ✓ Compiled /api/generate-values in 736ms
🔍 Looking for responses for session: sim-user-1-1750010354931
📊 Found 12 responses for session sim-user-1-1750010354931
💾 Cached values for session sim-user-1-1750010354931
 POST /api/generate-values 200 in 1091ms
✅ Health check completed: pass
 GET /api/health 200 in 6694ms
 GET /api/dilemmas/random 307 in 122ms
 ○ Compiling /api/dilemmas/[uuid] ...
 ✓ Compiled /api/dilemmas/[uuid] in 788ms
 GET /api/dilemmas/544daee8-694f-4685-9d66-bbc707653005 200 in 1633ms
📥 Received 12 responses for session test-session-1-1751538416915
💾 Inserting responses into database...
✅ Successfully inserted 12 responses
 POST /api/responses 200 in 235ms
🔍 Looking for responses for session: test-session-1-1751538416915
📊 Found 12 responses for session test-session-1-1751538416915
💾 Cached values for session test-session-1-1751538416915
 POST /api/generate-values 200 in 325ms
 GET /api/dilemmas/random 307 in 125ms
 GET /api/dilemmas/df0952aa-3849-439e-85de-9b6af4a6606b 200 in 245ms
📥 Received 12 responses for session test-session-2-1751538420079
💾 Inserting responses into database...
✅ Successfully inserted 12 responses
 POST /api/responses 200 in 222ms
🔍 Looking for responses for session: test-session-2-1751538420079
📊 Found 12 responses for session test-session-2-1751538420079
💾 Cached values for session test-session-2-1751538420079
 POST /api/generate-values 200 in 316ms
 GET /api/dilemmas/random 307 in 120ms
 GET /api/dilemmas/1ce4ba6a-adb4-41e6-8e7b-bfd9afb6ff74 200 in 250ms
📥 Received 12 responses for session test-session-3-1751538423204
💾 Inserting responses into database...
✅ Successfully inserted 12 responses
 POST /api/responses 200 in 228ms
🔍 Looking for responses for session: test-session-3-1751538423204
📊 Found 12 responses for session test-session-3-1751538423204
💾 Cached values for session test-session-3-1751538423204
 POST /api/generate-values 200 in 317ms
 GET /api/dilemmas/random 307 in 229ms
 GET /api/dilemmas/3673429e-5126-4092-be14-701d112cd04b 200 in 239ms
📥 Received 12 responses for session test-session-4-1751538426432
💾 Inserting responses into database...
✅ Successfully inserted 12 responses
 POST /api/responses 200 in 224ms
🔍 Looking for responses for session: test-session-4-1751538426432
📊 Found 12 responses for session test-session-4-1751538426432
💾 Cached values for session test-session-4-1751538426432
 POST /api/generate-values 200 in 314ms
 GET /api/dilemmas/random 307 in 117ms
 GET /api/dilemmas/597992a3-5b80-4723-a111-585c4aca9a9c 200 in 239ms
📥 Received 12 responses for session test-session-5-1751538429543
💾 Inserting responses into database...
✅ Successfully inserted 12 responses
 POST /api/responses 200 in 229ms
🔍 Looking for responses for session: test-session-5-1751538429543
📊 Found 12 responses for session test-session-5-1751538429543
💾 Cached values for session test-session-5-1751538429543
 POST /api/generate-values 200 in 321ms
 ○ Compiling / ...
 ✓ Compiled / in 4.9s
 GET /api/dilemmas/random 307 in 1143ms
 GET /api/dilemmas/random 307 in 347ms
 ○ Compiling /explore/[uuid] ...
 ✓ Compiled /explore/[uuid] in 2.7s
 GET /explore/f6cf8dde-3ea5-450d-a344-67cc1b434e2a 200 in 3596ms
 ○ Compiling /api/workbench/session/[sessionId] ...
 ✓ Compiled /api/workbench/session/[sessionId] in 1350ms
 GET /api/workbench/session/test-session-1-1751538416915 200 in 2669ms
 ○ Compiling /api/workbench/generate-variant ...
 ✓ Compiled /api/workbench/generate-variant in 1061ms
 ⨯ ./src/lib/values-templates.ts:563:14
Ecmascript file had an error
[0m [90m 561 |[39m[0m
[0m [90m 562 |[39m [90m// Export all templates including new ones[39m[0m
[0m[31m[1m>[22m[39m[90m 563 |[39m [36mexport[39m [36mconst[39m valueTemplates[33m:[39m [33mTemplateBlueprint[39m[] [33m=[39m [[0m
[0m [90m     |[39m              [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m 564 |[39m   enhancedTemplate[33m,[39m[0m
[0m [90m 565 |[39m   narrativeTemplate[33m,[39m[0m
[0m [90m 566 |[39m   minimalistTemplate[33m,[39m[0m

the name `valueTemplates` is defined multiple times


 ○ Compiling /_error ...
 ✓ Compiled /_error in 1591ms
 POST /api/workbench/generate-variant 500 in 2958ms
🔨 Generating values variant: enhanced for session test-session-1-1751538416915
✅ Generated enhanced variant: 352 words
 POST /api/workbench/generate-variant 200 in 1141ms
 ○ Compiling /api/workbench/test-alignment ...
 ✓ Compiled /api/workbench/test-alignment in 1342ms
🧪 Testing alignment: enhanced with claude-3.5-sonnet
Alignment test error: Error: OpenRouter API error: 401 - {"error":{"message":"No auth credentials found","code":401}}
    at OpenRouterService.generateCompletion (src/lib/openrouter.ts:56:12)
    at async POST (src/app/api/workbench/test-alignment/route.ts:46:21)
  54 |     if (!response.ok) {
  55 |       const error = await response.text();
> 56 |       throw new Error(`OpenRouter API error: ${response.status} - ${error}`);
     |            ^
  57 |     }
  58 |
  59 |     const data: OpenRouterResponse = await response.json();
 POST /api/workbench/test-alignment 500 in 1891ms
🔍 Health check: Testing database connectivity...
🔍 Health check: Testing dilemmas table...
🔍 Health check: Testing random dilemma API...
 GET /api/dilemmas/random 307 in 151ms
🔍 Health check: Testing responses API...
 GET /api/dilemmas/random 307 in 124ms
📥 Received 1 responses for session health-check-1751548037377
💾 Inserting responses into database...
✅ Successfully inserted 1 responses
 POST /api/responses 200 in 269ms
🔍 Health check: Testing user responses table...
🔍 Health check: Testing generate values API...
🔍 Looking for responses for session: sim-user-1-1750010354931
📊 Found 12 responses for session sim-user-1-1750010354931
💾 Cached values for session sim-user-1-1750010354931
 POST /api/generate-values 200 in 358ms
✅ Health check completed: pass
 GET /api/health 200 in 1946ms
 ○ Compiling /values-workbench ...
 ✓ Compiled /values-workbench in 1800ms
 HEAD /values-workbench 200 in 2242ms
 ○ Compiling /system-status ...
 ✓ Compiled /system-status in 2.3s
 HEAD /system-status 200 in 2772ms
 ○ Compiling /api/system-status ...
 ✓ Compiled /api/system-status in 1136ms
🔍 Comprehensive system status check...
System status check failed: Error: Failed query: select "session_id", count(*), max() from "user_responses" group by "user_responses"."session_id" order by max() desc limit $1
params: 10
    at async GET (src/app/api/system-status/route.ts:19:8)
  17 |       frameworkCount,
  18 |       recentSessions
> 19 |     ] = await Promise.all([
     |        ^
  20 |       db.select({ count: sql<number>`count(*)` }).from(dilemmas),
  21 |       db.select({ count: sql<number>`count(*)` }).from(userResponses),
  22 |       db.select({ count: sql<number>`count(*)` }).from(motifs), {
  query: 'select "session_id", count(*), max() from "user_responses" group by "user_responses"."session_id" order by max() desc limit $1',
  params: [Array],
  [cause]: Error [NeonDbError]: function max() does not exist
      at async GET (src/app/api/system-status/route.ts:19:8)
    17 |       frameworkCount,
    18 |       recentSessions
  > 19 |     ] = await Promise.all([
       |        ^
    20 |       db.select({ count: sql<number>`count(*)` }).from(dilemmas),
    21 |       db.select({ count: sql<number>`count(*)` }).from(userResponses),
    22 |       db.select({ count: sql<number>`count(*)` }).from(motifs), {
    severity: 'ERROR',
    code: '42883',
    detail: undefined,
    hint: 'No function matches the given name and argument types. You might need to add explicit type casts.',
    position: '32',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'parse_func.c',
    line: '629',
    routine: 'ParseFuncOrColumn',
    sourceError: undefined
  }
}
 GET /api/system-status 500 in 1948ms
🔍 Comprehensive system status check...
✅ System status complete: 523ms
 GET /api/system-status 200 in 734ms
🔍 Health check: Testing database connectivity...
🔍 Health check: Testing dilemmas table...
🔍 Health check: Testing random dilemma API...
 GET /api/dilemmas/random 307 in 150ms
🔍 Health check: Testing responses API...
 GET /api/dilemmas/random 307 in 130ms
📥 Received 1 responses for session health-check-1751548289162
💾 Inserting responses into database...
✅ Successfully inserted 1 responses
 POST /api/responses 200 in 256ms
🔍 Health check: Testing user responses table...
🔍 Health check: Testing generate values API...
🔍 Looking for responses for session: sim-user-1-1750010354931
📊 Found 12 responses for session sim-user-1-1750010354931
💾 Cached values for session sim-user-1-1750010354931
 POST /api/generate-values 200 in 393ms
✅ Health check completed: pass
 GET /api/health 200 in 1888ms
